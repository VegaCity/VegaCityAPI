2024-08-30 14:12:07.2272|63|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\meryc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. |url: |action: |Microsoft.Extensions.Logging.LoggingExtensions.UsingProfileAsKeyRepositoryWithDPAPI
2024-08-30 14:12:07.5548|0|ERROR|VegaCityApp.API.Program|Stop program because of exception System.InvalidOperationException: Unable to configure HTTPS endpoint. No server certificate was specified, and the default developer certificate could not be found or is out of date.
To generate a developer certificate run 'dotnet dev-certs https'. To trust the certificate (Windows and macOS only) run 'dotnet dev-certs https --trust'.
For more information on configuring HTTPS see https://go.microsoft.com/fwlink/?linkid=848054.
   at Microsoft.AspNetCore.Hosting.ListenOptionsHttpsExtensions.UseHttps(ListenOptions listenOptions, Action`1 configureOptions)
   at Microsoft.AspNetCore.Hosting.ListenOptionsHttpsExtensions.UseHttps(ListenOptions listenOptions)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IEnumerable`1 listenOptions, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Microsoft.AspNetCore.Builder.WebApplication.Run(String url)
   at Program.<Main>$(String[] args) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Program.cs:line 50|url: |action: |VegaCityApp.API.Program.<Main>$
2024-08-30 14:13:04.3521|63|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\meryc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. |url: |action: |Microsoft.Extensions.Logging.LoggingExtensions.UsingProfileAsKeyRepositoryWithDPAPI
2024-08-30 14:13:04.5770|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7127 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:13:04.5770|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5137 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:13:04.5770|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:13:04.5770|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:13:04.5770|0|INFO|Microsoft.Hosting.Lifetime|Content root path: D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\ |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:13:12.8817|63|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\meryc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. |url: |action: |Microsoft.Extensions.Logging.LoggingExtensions.UsingProfileAsKeyRepositoryWithDPAPI
2024-08-30 14:13:13.0113|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7127 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:13:13.0113|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5137 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:13:13.0113|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:13:13.0113|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:13:13.0113|0|INFO|Microsoft.Hosting.Lifetime|Content root path: D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\ |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:14:20.3344|63|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\meryc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. |url: |action: |Microsoft.Extensions.Logging.LoggingExtensions.UsingProfileAsKeyRepositoryWithDPAPI
2024-08-30 14:14:20.4918|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7127 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:14:20.4918|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5137 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:14:20.4918|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:14:20.4918|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:14:20.4918|0|INFO|Microsoft.Hosting.Lifetime|Content root path: D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\ |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:14:21.0575|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger - - |url: https://localhost/swagger|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:14:21.2423|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger - - - 301 0 - 186.9784ms |url: https://localhost/swagger|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:14:21.2423|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/index.html - - |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:14:21.6164|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/swagger-ui-bundle.js - - |url: https://localhost/swagger/swagger-ui-bundle.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:14:21.6164|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/swagger-ui.css - - |url: https://localhost/swagger/swagger-ui.css|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:14:21.6164|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:14:21.6164|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/swagger-ui-standalone-preset.js - - |url: https://localhost/swagger/swagger-ui-standalone-preset.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:14:21.6164|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_vs/browserLink - - |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:14:21.6164|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/index.html - - - 200 - text/html;charset=utf-8 368.2603ms |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:14:21.6164|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - - 200 12362 application/javascript;+charset=utf-8 3.0002ms |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:14:21.6316|2|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A' |url: https://localhost/swagger/swagger-ui-standalone-preset.js|action: |Microsoft.AspNetCore.StaticFiles.LoggerExtensions.FileServedCore
2024-08-30 14:14:21.6316|2|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A' |url: https://localhost/swagger/swagger-ui.css|action: |Microsoft.AspNetCore.StaticFiles.LoggerExtensions.FileServedCore
2024-08-30 14:14:21.6316|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/swagger-ui-standalone-preset.js - - - 200 312163 application/javascript 16.0512ms |url: https://localhost/swagger/swagger-ui-standalone-preset.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:14:21.6316|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/swagger-ui.css - - - 200 144929 text/css 16.2050ms |url: https://localhost/swagger/swagger-ui.css|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:14:21.6519|2|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A' |url: https://localhost/swagger/swagger-ui-bundle.js|action: |Microsoft.AspNetCore.StaticFiles.LoggerExtensions.FileServedCore
2024-08-30 14:14:21.6519|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/swagger-ui-bundle.js - - - 200 1061536 application/javascript 36.4124ms |url: https://localhost/swagger/swagger-ui-bundle.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:14:21.6627|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 44.7245ms |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:14:21.8906|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:14:21.9219|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/favicon-32x32.png - - |url: https://localhost/swagger/favicon-32x32.png|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:14:21.9219|2|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A' |url: https://localhost/swagger/favicon-32x32.png|action: |Microsoft.AspNetCore.StaticFiles.LoggerExtensions.FileServedCore
2024-08-30 14:14:21.9219|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/favicon-32x32.png - - - 200 628 image/png 2.2679ms |url: https://localhost/swagger/favicon-32x32.png|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:14:22.0115|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 120.8228ms |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:15:20.0742|63|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\meryc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. |url: |action: |Microsoft.Extensions.Logging.LoggingExtensions.UsingProfileAsKeyRepositoryWithDPAPI
2024-08-30 14:15:20.1754|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7127 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:15:20.1754|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5137 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:15:20.1754|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:15:20.1754|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:15:20.1754|0|INFO|Microsoft.Hosting.Lifetime|Content root path: D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\ |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:15:20.5294|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/index.html - - |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:15:20.7591|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_vs/browserLink - - |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:15:20.7591|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:15:20.7591|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/index.html - - - 200 - text/html;charset=utf-8 230.8347ms |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:15:20.7591|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - - 200 12362 application/javascript;+charset=utf-8 1.7667ms |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:15:20.7591|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 7.7454ms |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:15:20.8269|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:15:20.8951|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 68.1583ms |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:15:41.7282|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7127/api/v1/etag-type application/json 49 |url: https://localhost/api/v1/etag-type|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:15:41.7282|4|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful. |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.AspNetCore.Cors.CORSLoggerExtensions.PolicySuccess
2024-08-30 14:15:42.1093|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtagType (VegaCityApp.API)' |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutingEndpoint
2024-08-30 14:15:42.1299|3|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateEtagType", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEtagType(VegaCityApp.API.Payload.Request.EtagTypeRequest) on controller VegaCityApp.API.Controllers.Admin.AdminController (VegaCityApp.API). |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutingAction
2024-08-30 14:15:43.3479|10403|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.10 initialized 'VegaCityAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`5.Log
2024-08-30 14:15:44.4183|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (37ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = AnsiString), @p2='?' (DbType = Guid), @p3='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ETagType] ([Id], [ImageUrl], [MarketZoneId], [Name])
VALUES (@p0, @p1, @p2, @p3); |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`6.Log
2024-08-30 14:15:44.4451|1|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'VegaCityApp.API.Payload.Response.CreateEtagTypeResponse'. |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ObjectResultExecuting
2024-08-30 14:15:44.4599|2|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action VegaCityApp.API.Controllers.Admin.AdminController.CreateEtagType (VegaCityApp.API) in 2326.5506ms |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutedAction
2024-08-30 14:15:44.4599|1|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtagType (VegaCityApp.API)' |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutedEndpoint
2024-08-30 14:15:44.4599|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7127/api/v1/etag-type application/json 49 - 200 - application/json;+charset=utf-8 2735.5393ms |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:35:04.8338|63|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\meryc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. |url: |action: |Microsoft.Extensions.Logging.LoggingExtensions.UsingProfileAsKeyRepositoryWithDPAPI
2024-08-30 14:35:04.9472|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7127 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:35:04.9472|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5137 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:35:04.9472|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:35:04.9472|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:35:04.9472|0|INFO|Microsoft.Hosting.Lifetime|Content root path: D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\ |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:35:05.2044|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/index.html - - |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:35:05.4580|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:35:05.4580|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_vs/browserLink - - |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:35:05.4580|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/index.html - - - 200 - text/html;charset=utf-8 254.3506ms |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:35:05.4580|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - - 200 12362 application/javascript;+charset=utf-8 2.7386ms |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:35:05.4580|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 10.4976ms |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:35:05.6554|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:35:05.7875|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 132.1738ms |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:36:18.7947|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 |url: https://localhost/api/v1/etag|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:36:18.8010|4|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful. |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Cors.CORSLoggerExtensions.PolicySuccess
2024-08-30 14:36:18.8317|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutingEndpoint
2024-08-30 14:36:18.8511|3|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateEtag", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEtag(VegaCityApp.API.Payload.Request.EtagRequest) on controller VegaCityApp.API.Controllers.Admin.AdminController (VegaCityApp.API). |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutingAction
2024-08-30 14:36:19.6913|10403|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.10 initialized 'VegaCityAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`5.Log
2024-08-30 14:36:20.1918|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (45ms) [Parameters=[@__req_UserId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Birthday], [u].[CCCD], [u].[crDate], [u].[Email], [u].[FullName], [u].[Gender], [u].[ImageUrl], [u].[MarketZoneId], [u].[Password], [u].[PhoneNumber], [u].[pinCode], [u].[RoleId], [u].[StoreId], [u].[upsDate]
FROM [User] AS [u]
WHERE [u].[Id] = @__req_UserId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`6.Log
2024-08-30 14:36:20.2249|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__req_EtagTypeId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[ImageUrl], [e].[MarketZoneId], [e].[Name]
FROM [ETagType] AS [e]
WHERE [e].[Id] = @__req_EtagTypeId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`6.Log
2024-08-30 14:36:20.4232|20102|ERROR|Microsoft.EntityFrameworkCore.Database.Command|Failed executing DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = Date), @p3='?' (Size = 12) (DbType = AnsiStringFixedLength), @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (DbType = Guid), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 8000) (DbType = AnsiString), @p11='?' (DbType = Guid), @p12='?' (Size = 10) (DbType = AnsiStringFixedLength), @p13='?' (Size = 8000) (DbType = AnsiString), @p14='?' (DbType = DateTime), @p15='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ETag] ([Id], [Balance], [Birthday], [CCCD], [crDate], [Deflag], [EtagCode], [ETagTypeId], [FullName], [Gender], [ImageUrl], [MarketZoneId], [PhoneNumber], [QRCode], [upsDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15); |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`6.Log
2024-08-30 14:36:20.4469|10000|ERROR|Microsoft.EntityFrameworkCore.Update|An exception occurred in the database while saving changes for context type 'VegaCityApp.Domain.Models.VegaCityAppContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:75daf071-63f9-4384-bfe5-683499eabb1b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:75daf071-63f9-4384-bfe5-683499eabb1b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)|url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`3.Log
2024-08-30 14:36:20.4469|2|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API) in 1601.0725ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutedAction
2024-08-30 14:36:20.4469|1|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutedEndpoint
2024-08-30 14:36:20.4787|0|ERROR|VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware|Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:75daf071-63f9-4384-bfe5-683499eabb1b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at VegaCityApp.Repository.Implement.UnitOfWork`1.CommitAsync() in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp.Repository\Implement\UnitOfWork.cs:line 44
   at VegaCityApp.API.Services.Implement.EtagService.CreateEtag(EtagRequest req) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Services\Implement\EtagService.cs:line 83
   at VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag(EtagRequest request) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Controllers\Admin\AdminController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Middlewares\ExceptionHandlingMiddleware.cs:line 21 |url: https://localhost/api/v1/etag|action: CreateEtag|VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware.HandleExceptionAsync
2024-08-30 14:36:20.4871|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 - 500 - application/json 1692.3789ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:36:57.4655|63|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\meryc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. |url: |action: |Microsoft.Extensions.Logging.LoggingExtensions.UsingProfileAsKeyRepositoryWithDPAPI
2024-08-30 14:36:57.7052|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7127 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:36:57.7052|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5137 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:36:57.7087|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:36:57.7087|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:36:57.7087|0|INFO|Microsoft.Hosting.Lifetime|Content root path: D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\ |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:36:58.7389|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/index.html - - |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:36:59.1854|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:36:59.1914|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - - 200 12362 application/javascript;+charset=utf-8 5.5079ms |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:36:59.1914|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_vs/browserLink - - |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:36:59.1914|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/index.html - - - 200 - text/html;charset=utf-8 455.1443ms |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:36:59.2119|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 18.7902ms |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:36:59.3569|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:36:59.4663|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 109.5085ms |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:37:30.7586|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 |url: https://localhost/api/v1/etag|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:37:30.7586|4|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful. |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Cors.CORSLoggerExtensions.PolicySuccess
2024-08-30 14:37:30.8209|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutingEndpoint
2024-08-30 14:37:30.8423|3|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateEtag", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEtag(VegaCityApp.API.Payload.Request.EtagRequest) on controller VegaCityApp.API.Controllers.Admin.AdminController (VegaCityApp.API). |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutingAction
2024-08-30 14:37:35.0170|10403|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.10 initialized 'VegaCityAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.ContextInitialized
2024-08-30 14:37:35.9205|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (75ms) [Parameters=[@__req_UserId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Birthday], [u].[CCCD], [u].[crDate], [u].[Email], [u].[FullName], [u].[Gender], [u].[ImageUrl], [u].[MarketZoneId], [u].[Password], [u].[PhoneNumber], [u].[pinCode], [u].[RoleId], [u].[StoreId], [u].[upsDate]
FROM [User] AS [u]
WHERE [u].[Id] = @__req_UserId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 14:37:47.1221|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[@__req_EtagTypeId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[ImageUrl], [e].[MarketZoneId], [e].[Name]
FROM [ETagType] AS [e]
WHERE [e].[Id] = @__req_EtagTypeId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 14:38:19.2721|20102|ERROR|Microsoft.EntityFrameworkCore.Database.Command|Failed executing DbCommand (16ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = Date), @p3='?' (Size = 12) (DbType = AnsiStringFixedLength), @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (DbType = Guid), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 8000) (DbType = AnsiString), @p11='?' (DbType = Guid), @p12='?' (Size = 10) (DbType = AnsiStringFixedLength), @p13='?' (Size = 8000) (DbType = AnsiString), @p14='?' (DbType = DateTime), @p15='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ETag] ([Id], [Balance], [Birthday], [CCCD], [crDate], [Deflag], [EtagCode], [ETagTypeId], [FullName], [Gender], [ImageUrl], [MarketZoneId], [PhoneNumber], [QRCode], [upsDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15); |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.LogCommandError
2024-08-30 14:38:19.3185|10000|ERROR|Microsoft.EntityFrameworkCore.Update|An exception occurred in the database while saving changes for context type 'VegaCityApp.Domain.Models.VegaCityAppContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ee5d2b2e-828b-4c5d-917c-aa98edd90bb9
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ee5d2b2e-828b-4c5d-917c-aa98edd90bb9
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)|url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.SaveChangesFailedAsync
2024-08-30 14:38:19.4780|2|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API) in 48630.6088ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutedAction
2024-08-30 14:38:19.4780|1|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutedEndpoint
2024-08-30 14:38:19.5652|0|ERROR|VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware|Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ee5d2b2e-828b-4c5d-917c-aa98edd90bb9
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at VegaCityApp.Repository.Implement.UnitOfWork`1.CommitAsync() in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp.Repository\Implement\UnitOfWork.cs:line 44
   at VegaCityApp.API.Services.Implement.EtagService.CreateEtag(EtagRequest req)
   at VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag(EtagRequest request)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) |url: https://localhost/api/v1/etag|action: CreateEtag|VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware.HandleExceptionAsync
2024-08-30 14:38:19.5821|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 - 500 - application/json 48823.5494ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:38:20.0789|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/index.html - - |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:38:20.0935|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/index.html - - - 200 - text/html;charset=utf-8 14.5632ms |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:38:20.0977|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:38:20.0977|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_vs/browserLink - - |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:38:20.0977|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - - 200 12362 application/javascript;+charset=utf-8 2.0876ms |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:38:20.0977|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 8.9497ms |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:38:20.1607|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:38:20.1607|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 4.1332ms |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:38:51.0684|63|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\meryc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. |url: |action: |Microsoft.Extensions.Logging.LoggingExtensions.UsingProfileAsKeyRepositoryWithDPAPI
2024-08-30 14:38:51.2679|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7127 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:38:51.2687|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5137 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:38:51.2687|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:38:51.2687|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:38:51.2687|0|INFO|Microsoft.Hosting.Lifetime|Content root path: D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\ |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:38:51.9571|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger - - |url: https://localhost/swagger|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:38:52.1473|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger - - - 301 0 - 195.3863ms |url: https://localhost/swagger|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:38:52.1473|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/index.html - - |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:38:52.4597|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/swagger-ui-bundle.js - - |url: https://localhost/swagger/swagger-ui-bundle.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:38:52.4597|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/swagger-ui.css - - |url: https://localhost/swagger/swagger-ui.css|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:38:52.4597|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/swagger-ui-standalone-preset.js - - |url: https://localhost/swagger/swagger-ui-standalone-preset.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:38:52.4597|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:38:52.4597|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_vs/browserLink - - |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:38:52.4597|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - - 200 12362 application/javascript;+charset=utf-8 7.6336ms |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:38:52.4722|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/index.html - - - 200 - text/html;charset=utf-8 319.2234ms |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:38:52.4722|2|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A' |url: https://localhost/swagger/swagger-ui-standalone-preset.js|action: |Microsoft.AspNetCore.StaticFiles.LoggerExtensions.FileServedCore
2024-08-30 14:38:52.4722|2|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A' |url: https://localhost/swagger/swagger-ui.css|action: |Microsoft.AspNetCore.StaticFiles.LoggerExtensions.FileServedCore
2024-08-30 14:38:52.4722|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/swagger-ui.css - - - 200 144929 text/css 21.5708ms |url: https://localhost/swagger/swagger-ui.css|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:38:52.4722|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/swagger-ui-standalone-preset.js - - - 200 312163 application/javascript 21.2994ms |url: https://localhost/swagger/swagger-ui-standalone-preset.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:38:52.5037|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 43.0847ms |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:38:52.5037|2|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A' |url: https://localhost/swagger/swagger-ui-bundle.js|action: |Microsoft.AspNetCore.StaticFiles.LoggerExtensions.FileServedCore
2024-08-30 14:38:52.5037|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/swagger-ui-bundle.js - - - 200 1061536 application/javascript 47.4865ms |url: https://localhost/swagger/swagger-ui-bundle.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:38:52.6731|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:38:52.7087|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/favicon-32x32.png - - |url: https://localhost/swagger/favicon-32x32.png|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:38:52.7087|2|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A' |url: https://localhost/swagger/favicon-32x32.png|action: |Microsoft.AspNetCore.StaticFiles.LoggerExtensions.FileServedCore
2024-08-30 14:38:52.7087|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/favicon-32x32.png - - - 200 628 image/png 1.6777ms |url: https://localhost/swagger/favicon-32x32.png|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:38:52.8165|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 143.4376ms |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:38:58.4019|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 |url: https://localhost/api/v1/etag|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:38:58.4019|4|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful. |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Cors.CORSLoggerExtensions.PolicySuccess
2024-08-30 14:38:58.4604|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutingEndpoint
2024-08-30 14:38:58.4844|3|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateEtag", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEtag(VegaCityApp.API.Payload.Request.EtagRequest) on controller VegaCityApp.API.Controllers.Admin.AdminController (VegaCityApp.API). |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutingAction
2024-08-30 14:39:02.6860|10403|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.10 initialized 'VegaCityAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.ContextInitialized
2024-08-30 14:39:03.5276|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (71ms) [Parameters=[@__req_UserId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Birthday], [u].[CCCD], [u].[crDate], [u].[Email], [u].[FullName], [u].[Gender], [u].[ImageUrl], [u].[MarketZoneId], [u].[Password], [u].[PhoneNumber], [u].[pinCode], [u].[RoleId], [u].[StoreId], [u].[upsDate]
FROM [User] AS [u]
WHERE [u].[Id] = @__req_UserId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 14:39:05.0862|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[@__req_EtagTypeId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[ImageUrl], [e].[MarketZoneId], [e].[Name]
FROM [ETagType] AS [e]
WHERE [e].[Id] = @__req_EtagTypeId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 14:39:22.7234|20102|ERROR|Microsoft.EntityFrameworkCore.Database.Command|Failed executing DbCommand (26ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = Date), @p3='?' (Size = 12) (DbType = AnsiStringFixedLength), @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (DbType = Guid), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 8000) (DbType = AnsiString), @p11='?' (DbType = Guid), @p12='?' (Size = 10) (DbType = AnsiStringFixedLength), @p13='?' (Size = 8000) (DbType = AnsiString), @p14='?' (DbType = DateTime), @p15='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ETag] ([Id], [Balance], [Birthday], [CCCD], [crDate], [Deflag], [EtagCode], [ETagTypeId], [FullName], [Gender], [ImageUrl], [MarketZoneId], [PhoneNumber], [QRCode], [upsDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15); |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.LogCommandError
2024-08-30 14:39:22.7666|10000|ERROR|Microsoft.EntityFrameworkCore.Update|An exception occurred in the database while saving changes for context type 'VegaCityApp.Domain.Models.VegaCityAppContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c754aa95-90a2-485f-b4d9-5aafa277fb62
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c754aa95-90a2-485f-b4d9-5aafa277fb62
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)|url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.SaveChangesFailedAsync
2024-08-30 14:39:22.9289|2|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API) in 24440.4971ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutedAction
2024-08-30 14:39:22.9289|1|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutedEndpoint
2024-08-30 14:39:23.0194|0|ERROR|VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware|Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c754aa95-90a2-485f-b4d9-5aafa277fb62
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at VegaCityApp.Repository.Implement.UnitOfWork`1.CommitAsync() in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp.Repository\Implement\UnitOfWork.cs:line 44
   at VegaCityApp.API.Services.Implement.EtagService.CreateEtag(EtagRequest req) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Services\Implement\EtagService.cs:line 83
   at VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag(EtagRequest request) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Controllers\Admin\AdminController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Middlewares\ExceptionHandlingMiddleware.cs:line 21 |url: https://localhost/api/v1/etag|action: CreateEtag|VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware.HandleExceptionAsync
2024-08-30 14:39:23.0350|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 - 500 - application/json 24633.0142ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:41:12.1401|63|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\meryc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. |url: |action: |Microsoft.Extensions.Logging.LoggingExtensions.UsingProfileAsKeyRepositoryWithDPAPI
2024-08-30 14:41:12.2460|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7127 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:41:12.2460|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5137 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:41:12.2460|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:41:12.2460|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:41:12.2460|0|INFO|Microsoft.Hosting.Lifetime|Content root path: D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\ |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:41:12.7426|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger - - |url: https://localhost/swagger|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:41:12.8706|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger - - - 301 0 - 129.6178ms |url: https://localhost/swagger|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:41:12.8804|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/index.html - - |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:41:13.0596|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/swagger-ui.css - - |url: https://localhost/swagger/swagger-ui.css|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:41:13.0596|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/swagger-ui-bundle.js - - |url: https://localhost/swagger/swagger-ui-bundle.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:41:13.0596|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/index.html - - - 200 - text/html;charset=utf-8 179.1870ms |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:41:13.0596|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/swagger-ui-standalone-preset.js - - |url: https://localhost/swagger/swagger-ui-standalone-preset.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:41:13.0596|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_vs/browserLink - - |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:41:13.0596|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:41:13.0596|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - - 200 12362 application/javascript;+charset=utf-8 2.0942ms |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:41:13.0671|2|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A' |url: https://localhost/swagger/swagger-ui.css|action: |Microsoft.AspNetCore.StaticFiles.LoggerExtensions.FileServedCore
2024-08-30 14:41:13.0671|2|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A' |url: https://localhost/swagger/swagger-ui-standalone-preset.js|action: |Microsoft.AspNetCore.StaticFiles.LoggerExtensions.FileServedCore
2024-08-30 14:41:13.0671|2|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A' |url: https://localhost/swagger/swagger-ui-bundle.js|action: |Microsoft.AspNetCore.StaticFiles.LoggerExtensions.FileServedCore
2024-08-30 14:41:13.0671|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/swagger-ui-standalone-preset.js - - - 200 312163 application/javascript 6.8501ms |url: https://localhost/swagger/swagger-ui-standalone-preset.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:41:13.0671|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/swagger-ui.css - - - 200 144929 text/css 7.5708ms |url: https://localhost/swagger/swagger-ui.css|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:41:13.0671|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/swagger-ui-bundle.js - - - 200 1061536 application/javascript 7.6376ms |url: https://localhost/swagger/swagger-ui-bundle.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:41:13.0671|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 7.9755ms |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:41:13.2459|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:41:13.2715|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/favicon-32x32.png - - |url: https://localhost/swagger/favicon-32x32.png|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:41:13.2715|2|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A' |url: https://localhost/swagger/favicon-32x32.png|action: |Microsoft.AspNetCore.StaticFiles.LoggerExtensions.FileServedCore
2024-08-30 14:41:13.2715|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/favicon-32x32.png - - - 200 628 image/png 1.1759ms |url: https://localhost/swagger/favicon-32x32.png|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:41:13.3385|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 92.5485ms |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:41:44.0291|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 |url: https://localhost/api/v1/etag|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:41:44.0291|4|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful. |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Cors.CORSLoggerExtensions.PolicySuccess
2024-08-30 14:41:44.0505|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutingEndpoint
2024-08-30 14:41:44.0669|3|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateEtag", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEtag(VegaCityApp.API.Payload.Request.EtagRequest) on controller VegaCityApp.API.Controllers.Admin.AdminController (VegaCityApp.API). |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutingAction
2024-08-30 14:41:44.7958|10403|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.10 initialized 'VegaCityAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`5.Log
2024-08-30 14:41:45.2373|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (38ms) [Parameters=[@__req_UserId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Birthday], [u].[CCCD], [u].[crDate], [u].[Email], [u].[FullName], [u].[Gender], [u].[ImageUrl], [u].[MarketZoneId], [u].[Password], [u].[PhoneNumber], [u].[pinCode], [u].[RoleId], [u].[StoreId], [u].[upsDate]
FROM [User] AS [u]
WHERE [u].[Id] = @__req_UserId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`6.Log
2024-08-30 14:41:45.2704|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__req_EtagTypeId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[ImageUrl], [e].[MarketZoneId], [e].[Name]
FROM [ETagType] AS [e]
WHERE [e].[Id] = @__req_EtagTypeId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`6.Log
2024-08-30 14:41:45.4688|20102|ERROR|Microsoft.EntityFrameworkCore.Database.Command|Failed executing DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = Date), @p3='?' (Size = 12) (DbType = AnsiStringFixedLength), @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (DbType = Guid), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 8000) (DbType = AnsiString), @p11='?' (DbType = Guid), @p12='?' (Size = 10) (DbType = AnsiStringFixedLength), @p13='?' (Size = 8000) (DbType = AnsiString), @p14='?' (DbType = DateTime), @p15='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ETag] ([Id], [Balance], [Birthday], [CCCD], [crDate], [Deflag], [EtagCode], [ETagTypeId], [FullName], [Gender], [ImageUrl], [MarketZoneId], [PhoneNumber], [QRCode], [upsDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15); |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`6.Log
2024-08-30 14:41:45.4876|10000|ERROR|Microsoft.EntityFrameworkCore.Update|An exception occurred in the database while saving changes for context type 'VegaCityApp.Domain.Models.VegaCityAppContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:6b0cc8ed-d38a-4987-b3d6-c028a0b34e08
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:6b0cc8ed-d38a-4987-b3d6-c028a0b34e08
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)|url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`3.Log
2024-08-30 14:41:45.4950|2|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API) in 1425.3205ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutedAction
2024-08-30 14:41:45.4950|1|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutedEndpoint
2024-08-30 14:41:45.5107|0|ERROR|VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware|Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:6b0cc8ed-d38a-4987-b3d6-c028a0b34e08
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at VegaCityApp.Repository.Implement.UnitOfWork`1.CommitAsync() in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp.Repository\Implement\UnitOfWork.cs:line 44
   at VegaCityApp.API.Services.Implement.EtagService.CreateEtag(EtagRequest req) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Services\Implement\EtagService.cs:line 83
   at VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag(EtagRequest request) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Controllers\Admin\AdminController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Middlewares\ExceptionHandlingMiddleware.cs:line 21 |url: https://localhost/api/v1/etag|action: CreateEtag|VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware.HandleExceptionAsync
2024-08-30 14:41:45.5107|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 - 500 - application/json 1488.0404ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:43:42.3808|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7127/api/v1/etag-type application/json 50 |url: https://localhost/api/v1/etag-type|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:43:42.3808|4|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful. |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.AspNetCore.Cors.CORSLoggerExtensions.PolicySuccess
2024-08-30 14:43:42.3808|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtagType (VegaCityApp.API)' |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutingEndpoint
2024-08-30 14:43:42.3808|3|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateEtagType", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEtagType(VegaCityApp.API.Payload.Request.EtagTypeRequest) on controller VegaCityApp.API.Controllers.Admin.AdminController (VegaCityApp.API). |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutingAction
2024-08-30 14:43:42.4243|10403|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.10 initialized 'VegaCityAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`5.Log
2024-08-30 14:43:42.4338|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = AnsiString), @p2='?' (DbType = Guid), @p3='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ETagType] ([Id], [ImageUrl], [MarketZoneId], [Name])
VALUES (@p0, @p1, @p2, @p3); |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`6.Log
2024-08-30 14:43:42.4512|1|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'VegaCityApp.API.Payload.Response.CreateEtagTypeResponse'. |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ObjectResultExecuting
2024-08-30 14:43:42.4608|2|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action VegaCityApp.API.Controllers.Admin.AdminController.CreateEtagType (VegaCityApp.API) in 75.0295ms |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutedAction
2024-08-30 14:43:42.4608|1|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtagType (VegaCityApp.API)' |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutedEndpoint
2024-08-30 14:43:42.4608|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7127/api/v1/etag-type application/json 50 - 200 - application/json;+charset=utf-8 81.3587ms |url: https://localhost/api/v1/etag-type|action: CreateEtagType|Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:46:41.5954|63|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\meryc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. |url: |action: |Microsoft.Extensions.Logging.LoggingExtensions.UsingProfileAsKeyRepositoryWithDPAPI
2024-08-30 14:46:41.8324|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7127 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:46:41.8324|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5137 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:46:41.8324|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:46:41.8324|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:46:41.8324|0|INFO|Microsoft.Hosting.Lifetime|Content root path: D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\ |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:46:42.4664|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/index.html - - |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:46:42.9591|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:46:42.9591|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_vs/browserLink - - |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:46:42.9768|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - - 200 12362 application/javascript;+charset=utf-8 16.4468ms |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:46:42.9768|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/index.html - - - 200 - text/html;charset=utf-8 516.2127ms |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:46:42.9768|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 25.3864ms |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:46:43.1701|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:46:43.3113|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 141.2265ms |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:46:59.1095|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 |url: https://localhost/api/v1/etag|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:46:59.1150|4|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful. |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Cors.CORSLoggerExtensions.PolicySuccess
2024-08-30 14:46:59.1641|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutingEndpoint
2024-08-30 14:46:59.1870|3|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateEtag", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEtag(VegaCityApp.API.Payload.Request.EtagRequest) on controller VegaCityApp.API.Controllers.Admin.AdminController (VegaCityApp.API). |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutingAction
2024-08-30 14:47:00.3514|10403|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.10 initialized 'VegaCityAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.ContextInitialized
2024-08-30 14:47:01.1751|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (74ms) [Parameters=[@__req_UserId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Birthday], [u].[CCCD], [u].[crDate], [u].[Email], [u].[FullName], [u].[Gender], [u].[ImageUrl], [u].[MarketZoneId], [u].[Password], [u].[PhoneNumber], [u].[pinCode], [u].[RoleId], [u].[StoreId], [u].[upsDate]
FROM [User] AS [u]
WHERE [u].[Id] = @__req_UserId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 14:47:01.2355|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__req_EtagTypeId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[ImageUrl], [e].[MarketZoneId], [e].[Name]
FROM [ETagType] AS [e]
WHERE [e].[Id] = @__req_EtagTypeId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 14:48:26.0347|20102|ERROR|Microsoft.EntityFrameworkCore.Database.Command|Failed executing DbCommand (26ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = Date), @p3='?' (Size = 12) (DbType = AnsiStringFixedLength), @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (DbType = Guid), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 8000) (DbType = AnsiString), @p11='?' (DbType = Guid), @p12='?' (Size = 10) (DbType = AnsiStringFixedLength), @p13='?' (Size = 8000) (DbType = AnsiString), @p14='?' (DbType = DateTime), @p15='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ETag] ([Id], [Balance], [Birthday], [CCCD], [crDate], [Deflag], [EtagCode], [ETagTypeId], [FullName], [Gender], [ImageUrl], [MarketZoneId], [PhoneNumber], [QRCode], [upsDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15); |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.LogCommandError
2024-08-30 14:48:26.0732|10000|ERROR|Microsoft.EntityFrameworkCore.Update|An exception occurred in the database while saving changes for context type 'VegaCityApp.Domain.Models.VegaCityAppContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:96ce0daf-8abd-427a-9523-5aca9f513dc9
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:96ce0daf-8abd-427a-9523-5aca9f513dc9
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)|url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.SaveChangesFailedAsync
2024-08-30 14:48:26.2274|2|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API) in 87036.4335ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutedAction
2024-08-30 14:48:26.2274|1|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutedEndpoint
2024-08-30 14:48:26.3248|0|ERROR|VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware|Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:96ce0daf-8abd-427a-9523-5aca9f513dc9
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at VegaCityApp.Repository.Implement.UnitOfWork`1.CommitAsync() in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp.Repository\Implement\UnitOfWork.cs:line 44
   at VegaCityApp.API.Services.Implement.EtagService.CreateEtag(EtagRequest req) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Services\Implement\EtagService.cs:line 83
   at VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag(EtagRequest request) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Controllers\Admin\AdminController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Middlewares\ExceptionHandlingMiddleware.cs:line 21 |url: https://localhost/api/v1/etag|action: CreateEtag|VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware.HandleExceptionAsync
2024-08-30 14:48:26.3450|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 - 500 - application/json 87235.4770ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:48:48.3251|63|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\meryc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. |url: |action: |Microsoft.Extensions.Logging.LoggingExtensions.UsingProfileAsKeyRepositoryWithDPAPI
2024-08-30 14:48:48.5653|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7127 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:48:48.5653|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5137 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:48:48.5653|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:48:48.5653|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:48:48.5653|0|INFO|Microsoft.Hosting.Lifetime|Content root path: D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\ |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:48:48.8139|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/index.html - - |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:48:49.2073|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_vs/browserLink - - |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:48:49.2073|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:48:49.2073|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - - 200 12362 application/javascript;+charset=utf-8 13.5414ms |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:48:49.2217|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/index.html - - - 200 - text/html;charset=utf-8 410.0061ms |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:48:49.2217|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 22.8634ms |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:48:49.2879|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:48:49.4169|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 129.0034ms |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:48:59.2979|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 |url: https://localhost/api/v1/etag|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:48:59.3039|4|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful. |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Cors.CORSLoggerExtensions.PolicySuccess
2024-08-30 14:48:59.3508|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutingEndpoint
2024-08-30 14:48:59.3741|3|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateEtag", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEtag(VegaCityApp.API.Payload.Request.EtagRequest) on controller VegaCityApp.API.Controllers.Admin.AdminController (VegaCityApp.API). |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutingAction
2024-08-30 14:49:00.5036|10403|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.10 initialized 'VegaCityAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.ContextInitialized
2024-08-30 14:49:01.4655|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (76ms) [Parameters=[@__req_UserId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Birthday], [u].[CCCD], [u].[crDate], [u].[Email], [u].[FullName], [u].[Gender], [u].[ImageUrl], [u].[MarketZoneId], [u].[Password], [u].[PhoneNumber], [u].[pinCode], [u].[RoleId], [u].[StoreId], [u].[upsDate]
FROM [User] AS [u]
WHERE [u].[Id] = @__req_UserId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 14:49:01.5294|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__req_EtagTypeId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[ImageUrl], [e].[MarketZoneId], [e].[Name]
FROM [ETagType] AS [e]
WHERE [e].[Id] = @__req_EtagTypeId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 14:49:15.3659|20102|ERROR|Microsoft.EntityFrameworkCore.Database.Command|Failed executing DbCommand (29ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = Date), @p3='?' (Size = 12) (DbType = AnsiStringFixedLength), @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (DbType = Guid), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 8000) (DbType = AnsiString), @p11='?' (DbType = Guid), @p12='?' (Size = 10) (DbType = AnsiStringFixedLength), @p13='?' (Size = 8000) (DbType = AnsiString), @p14='?' (DbType = DateTime), @p15='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ETag] ([Id], [Balance], [Birthday], [CCCD], [crDate], [Deflag], [EtagCode], [ETagTypeId], [FullName], [Gender], [ImageUrl], [MarketZoneId], [PhoneNumber], [QRCode], [upsDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15); |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.LogCommandError
2024-08-30 14:49:15.4048|10000|ERROR|Microsoft.EntityFrameworkCore.Update|An exception occurred in the database while saving changes for context type 'VegaCityApp.Domain.Models.VegaCityAppContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:af3fa895-b910-4e3d-8f98-1093727c6bfd
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:af3fa895-b910-4e3d-8f98-1093727c6bfd
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)|url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.SaveChangesFailedAsync
2024-08-30 14:49:15.5675|2|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API) in 16189.6227ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutedAction
2024-08-30 14:49:15.5675|1|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutedEndpoint
2024-08-30 14:49:15.6593|0|ERROR|VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware|Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:af3fa895-b910-4e3d-8f98-1093727c6bfd
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at VegaCityApp.Repository.Implement.UnitOfWork`1.CommitAsync() in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp.Repository\Implement\UnitOfWork.cs:line 44
   at VegaCityApp.API.Services.Implement.EtagService.CreateEtag(EtagRequest req) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Services\Implement\EtagService.cs:line 83
   at VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag(EtagRequest request) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Controllers\Admin\AdminController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Middlewares\ExceptionHandlingMiddleware.cs:line 21 |url: https://localhost/api/v1/etag|action: CreateEtag|VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware.HandleExceptionAsync
2024-08-30 14:49:15.6737|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 - 500 - application/json 16375.7412ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:54:32.4383|63|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\meryc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. |url: |action: |Microsoft.Extensions.Logging.LoggingExtensions.UsingProfileAsKeyRepositoryWithDPAPI
2024-08-30 14:54:32.6239|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7127 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:54:32.6239|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5137 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:54:32.6239|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:54:32.6239|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:54:32.6239|0|INFO|Microsoft.Hosting.Lifetime|Content root path: D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\ |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:54:33.2020|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/index.html - - |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:54:33.6161|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:54:33.6161|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_vs/browserLink - - |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:54:33.6371|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - - 200 12362 application/javascript;+charset=utf-8 20.3127ms |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:54:33.6371|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/index.html - - - 200 - text/html;charset=utf-8 438.1202ms |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:54:33.6443|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 28.2127ms |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:54:33.6984|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:54:33.8330|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 134.6341ms |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:54:48.6531|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 |url: https://localhost/api/v1/etag|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:54:48.6609|4|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful. |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Cors.CORSLoggerExtensions.PolicySuccess
2024-08-30 14:54:48.7104|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutingEndpoint
2024-08-30 14:54:48.7339|3|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateEtag", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEtag(VegaCityApp.API.Payload.Request.EtagRequest) on controller VegaCityApp.API.Controllers.Admin.AdminController (VegaCityApp.API). |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutingAction
2024-08-30 14:54:49.8750|10403|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.10 initialized 'VegaCityAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.ContextInitialized
2024-08-30 14:54:50.7907|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (74ms) [Parameters=[@__req_UserId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Birthday], [u].[CCCD], [u].[crDate], [u].[Email], [u].[FullName], [u].[Gender], [u].[ImageUrl], [u].[MarketZoneId], [u].[Password], [u].[PhoneNumber], [u].[pinCode], [u].[RoleId], [u].[StoreId], [u].[upsDate]
FROM [User] AS [u]
WHERE [u].[Id] = @__req_UserId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 14:54:50.8568|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__req_EtagTypeId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[ImageUrl], [e].[MarketZoneId], [e].[Name]
FROM [ETagType] AS [e]
WHERE [e].[Id] = @__req_EtagTypeId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 14:54:55.8233|20102|ERROR|Microsoft.EntityFrameworkCore.Database.Command|Failed executing DbCommand (36ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = Date), @p3='?' (Size = 12) (DbType = AnsiStringFixedLength), @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (DbType = Guid), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 8000) (DbType = AnsiString), @p11='?' (DbType = Guid), @p12='?' (Size = 10) (DbType = AnsiStringFixedLength), @p13='?' (Size = 8000) (DbType = AnsiString), @p14='?' (DbType = DateTime), @p15='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ETag] ([Id], [Balance], [Birthday], [CCCD], [crDate], [Deflag], [EtagCode], [ETagTypeId], [FullName], [Gender], [ImageUrl], [MarketZoneId], [PhoneNumber], [QRCode], [upsDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15); |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.LogCommandError
2024-08-30 14:54:55.8657|10000|ERROR|Microsoft.EntityFrameworkCore.Update|An exception occurred in the database while saving changes for context type 'VegaCityApp.Domain.Models.VegaCityAppContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5f6220b9-e99b-48ef-8a31-decf7709c7ec
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5f6220b9-e99b-48ef-8a31-decf7709c7ec
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)|url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.SaveChangesFailedAsync
2024-08-30 14:54:56.0323|2|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API) in 7294.5631ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutedAction
2024-08-30 14:54:56.0343|1|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutedEndpoint
2024-08-30 14:54:56.1445|0|ERROR|VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware|Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5f6220b9-e99b-48ef-8a31-decf7709c7ec
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at VegaCityApp.Repository.Implement.UnitOfWork`1.CommitAsync() in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp.Repository\Implement\UnitOfWork.cs:line 44
   at VegaCityApp.API.Services.Implement.EtagService.CreateEtag(EtagRequest req) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Services\Implement\EtagService.cs:line 83
   at VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag(EtagRequest request) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Controllers\Admin\AdminController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Middlewares\ExceptionHandlingMiddleware.cs:line 21 |url: https://localhost/api/v1/etag|action: CreateEtag|VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware.HandleExceptionAsync
2024-08-30 14:54:56.1615|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 - 500 - application/json 7508.3937ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:56:42.2929|63|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\meryc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. |url: |action: |Microsoft.Extensions.Logging.LoggingExtensions.UsingProfileAsKeyRepositoryWithDPAPI
2024-08-30 14:56:42.5096|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7127 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:56:42.5096|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5137 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:56:42.5096|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:56:42.5096|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:56:42.5096|0|INFO|Microsoft.Hosting.Lifetime|Content root path: D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\ |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:56:43.2363|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/index.html - - |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:56:43.7282|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_vs/browserLink - - |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:56:43.7282|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:56:43.7439|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - - 200 12362 application/javascript;+charset=utf-8 15.0683ms |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:56:43.7439|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/index.html - - - 200 - text/html;charset=utf-8 511.4750ms |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:56:43.7439|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 22.9594ms |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:56:43.8102|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:56:43.9513|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 141.1360ms |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:56:51.7448|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 |url: https://localhost/api/v1/etag|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:56:51.7448|4|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful. |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Cors.CORSLoggerExtensions.PolicySuccess
2024-08-30 14:56:51.8165|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutingEndpoint
2024-08-30 14:56:51.8465|3|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateEtag", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEtag(VegaCityApp.API.Payload.Request.EtagRequest) on controller VegaCityApp.API.Controllers.Admin.AdminController (VegaCityApp.API). |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutingAction
2024-08-30 14:56:53.2659|10403|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.10 initialized 'VegaCityAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.ContextInitialized
2024-08-30 14:56:54.1865|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (84ms) [Parameters=[@__req_UserId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Birthday], [u].[CCCD], [u].[crDate], [u].[Email], [u].[FullName], [u].[Gender], [u].[ImageUrl], [u].[MarketZoneId], [u].[Password], [u].[PhoneNumber], [u].[pinCode], [u].[RoleId], [u].[StoreId], [u].[upsDate]
FROM [User] AS [u]
WHERE [u].[Id] = @__req_UserId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 14:56:54.2560|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__req_EtagTypeId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[ImageUrl], [e].[MarketZoneId], [e].[Name]
FROM [ETagType] AS [e]
WHERE [e].[Id] = @__req_EtagTypeId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 14:57:02.7007|20102|ERROR|Microsoft.EntityFrameworkCore.Database.Command|Failed executing DbCommand (35ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = Date), @p3='?' (Size = 12) (DbType = AnsiStringFixedLength), @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (DbType = Guid), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 8000) (DbType = AnsiString), @p11='?' (DbType = Guid), @p12='?' (Size = 10) (DbType = AnsiStringFixedLength), @p13='?' (Size = 8000) (DbType = AnsiString), @p14='?' (DbType = DateTime), @p15='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ETag] ([Id], [Balance], [Birthday], [CCCD], [crDate], [Deflag], [EtagCode], [ETagTypeId], [FullName], [Gender], [ImageUrl], [MarketZoneId], [PhoneNumber], [QRCode], [upsDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15); |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.LogCommandError
2024-08-30 14:57:02.7463|10000|ERROR|Microsoft.EntityFrameworkCore.Update|An exception occurred in the database while saving changes for context type 'VegaCityApp.Domain.Models.VegaCityAppContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:68a2b69c-90cd-41d9-805d-fb1822eb9df5
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:68a2b69c-90cd-41d9-805d-fb1822eb9df5
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)|url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.SaveChangesFailedAsync
2024-08-30 14:57:02.9059|2|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API) in 11055.1709ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutedAction
2024-08-30 14:57:02.9059|1|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutedEndpoint
2024-08-30 14:57:03.0061|0|ERROR|VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware|Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ETag_MarketZone". The conflict occurred in database "VegaCityApp", table "dbo.MarketZone", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:68a2b69c-90cd-41d9-805d-fb1822eb9df5
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at VegaCityApp.Repository.Implement.UnitOfWork`1.CommitAsync() in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp.Repository\Implement\UnitOfWork.cs:line 44
   at VegaCityApp.API.Services.Implement.EtagService.CreateEtag(EtagRequest req) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Services\Implement\EtagService.cs:line 84
   at VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag(EtagRequest request) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Controllers\Admin\AdminController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\Middlewares\ExceptionHandlingMiddleware.cs:line 21 |url: https://localhost/api/v1/etag|action: CreateEtag|VegaCityApp.API.Middlewares.ExceptionHandlingMiddleware.HandleExceptionAsync
2024-08-30 14:57:03.0254|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 - 500 - application/json 11280.6571ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:58:35.8051|63|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\meryc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. |url: |action: |Microsoft.Extensions.Logging.LoggingExtensions.UsingProfileAsKeyRepositoryWithDPAPI
2024-08-30 14:58:36.0034|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7127 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:58:36.0044|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5137 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:58:36.0044|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:58:36.0044|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:58:36.0044|0|INFO|Microsoft.Hosting.Lifetime|Content root path: D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\ |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:58:36.2030|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/index.html - - |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:58:36.7758|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_vs/browserLink - - |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:58:36.7758|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:58:36.7903|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - - 200 12362 application/javascript;+charset=utf-8 13.5952ms |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:58:36.7903|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/index.html - - - 200 - text/html;charset=utf-8 590.4027ms |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:58:36.7997|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 23.9212ms |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:58:36.8858|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:58:37.0770|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 191.3413ms |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:58:44.5442|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 |url: https://localhost/api/v1/etag|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:58:44.5507|4|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful. |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Cors.CORSLoggerExtensions.PolicySuccess
2024-08-30 14:58:44.6003|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutingEndpoint
2024-08-30 14:58:44.6243|3|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateEtag", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEtag(VegaCityApp.API.Payload.Request.EtagRequest) on controller VegaCityApp.API.Controllers.Admin.AdminController (VegaCityApp.API). |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutingAction
2024-08-30 14:58:45.7362|10403|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.10 initialized 'VegaCityAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.ContextInitialized
2024-08-30 14:58:46.6600|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (87ms) [Parameters=[@__req_UserId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Birthday], [u].[CCCD], [u].[crDate], [u].[Email], [u].[FullName], [u].[Gender], [u].[ImageUrl], [u].[MarketZoneId], [u].[Password], [u].[PhoneNumber], [u].[pinCode], [u].[RoleId], [u].[StoreId], [u].[upsDate]
FROM [User] AS [u]
WHERE [u].[Id] = @__req_UserId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 14:58:46.7299|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__req_EtagTypeId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[ImageUrl], [e].[MarketZoneId], [e].[Name]
FROM [ETagType] AS [e]
WHERE [e].[Id] = @__req_EtagTypeId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 14:58:46.7299|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__etagType_MarketZoneId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Address], [m].[crDate], [m].[Deflag], [m].[Description], [m].[Email], [m].[ImageUrl], [m].[Location], [m].[Name], [m].[PhoneNumber], [m].[ShortName], [m].[upsDate]
FROM [MarketZone] AS [m]
WHERE [m].[Id] = @__etagType_MarketZoneId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 14:58:46.7508|1|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'VegaCityApp.API.Payload.Response.CreateEtagResponse'. |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ObjectResultExecuting
2024-08-30 14:58:46.7696|2|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API) in 2141.3339ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutedAction
2024-08-30 14:58:46.7696|1|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutedEndpoint
2024-08-30 14:58:46.7696|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 - 200 - application/json;+charset=utf-8 2237.0768ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:59:09.5281|63|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\meryc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. |url: |action: |Microsoft.Extensions.Logging.LoggingExtensions.UsingProfileAsKeyRepositoryWithDPAPI
2024-08-30 14:59:09.7352|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7127 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:59:09.7352|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5137 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 14:59:09.7352|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:59:09.7383|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:59:09.7383|0|INFO|Microsoft.Hosting.Lifetime|Content root path: D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\ |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 14:59:10.3157|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/index.html - - |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:59:10.7142|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:59:10.7142|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_vs/browserLink - - |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:59:10.7290|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - - 200 12362 application/javascript;+charset=utf-8 13.0031ms |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:59:10.7290|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/index.html - - - 200 - text/html;charset=utf-8 413.5975ms |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:59:10.7547|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 36.0376ms |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:59:10.8102|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:59:10.9317|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 121.5196ms |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 14:59:23.5408|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 |url: https://localhost/api/v1/etag|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 14:59:23.5408|4|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful. |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Cors.CORSLoggerExtensions.PolicySuccess
2024-08-30 14:59:23.5959|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutingEndpoint
2024-08-30 14:59:23.6181|3|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateEtag", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEtag(VegaCityApp.API.Payload.Request.EtagRequest) on controller VegaCityApp.API.Controllers.Admin.AdminController (VegaCityApp.API). |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutingAction
2024-08-30 14:59:24.7177|10403|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.10 initialized 'VegaCityAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.ContextInitialized
2024-08-30 14:59:25.6380|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (77ms) [Parameters=[@__req_UserId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Birthday], [u].[CCCD], [u].[crDate], [u].[Email], [u].[FullName], [u].[Gender], [u].[ImageUrl], [u].[MarketZoneId], [u].[Password], [u].[PhoneNumber], [u].[pinCode], [u].[RoleId], [u].[StoreId], [u].[upsDate]
FROM [User] AS [u]
WHERE [u].[Id] = @__req_UserId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 14:59:25.7052|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__req_EtagTypeId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[ImageUrl], [e].[MarketZoneId], [e].[Name]
FROM [ETagType] AS [e]
WHERE [e].[Id] = @__req_EtagTypeId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 14:59:28.4680|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[@__etagType_MarketZoneId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Address], [m].[crDate], [m].[Deflag], [m].[Description], [m].[Email], [m].[ImageUrl], [m].[Location], [m].[Name], [m].[PhoneNumber], [m].[ShortName], [m].[upsDate]
FROM [MarketZone] AS [m]
WHERE [m].[Id] = @__etagType_MarketZoneId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.Internal.RelationalCommandDiagnosticsLogger.CommandReaderExecutedAsync
2024-08-30 15:02:27.9164|1|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'VegaCityApp.API.Payload.Response.CreateEtagResponse'. |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ObjectResultExecuting
2024-08-30 15:02:29.3946|2|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API) in 185772.1612ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutedAction
2024-08-30 15:02:29.3946|1|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutedEndpoint
2024-08-30 15:02:33.1925|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 - 200 - application/json;+charset=utf-8 189651.7188ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 15:03:12.1921|63|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\meryc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. |url: |action: |Microsoft.Extensions.Logging.LoggingExtensions.UsingProfileAsKeyRepositoryWithDPAPI
2024-08-30 15:03:12.3017|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7127 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 15:03:12.3017|14|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:5137 |url: |action: |Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync
2024-08-30 15:03:12.3017|0|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down. |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 15:03:12.3017|0|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 15:03:12.3017|0|INFO|Microsoft.Hosting.Lifetime|Content root path: D:\LEARNING\codeForMe\C#\VegaCityApp\VegaCityApp\ |url: |action: |Microsoft.Extensions.Hosting.Internal.ConsoleLifetime.OnApplicationStarted
2024-08-30 15:03:12.8357|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/index.html - - |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 15:03:13.0870|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_vs/browserLink - - |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 15:03:13.0870|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 15:03:13.0870|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_framework/aspnetcore-browser-refresh.js - - - 200 12362 application/javascript;+charset=utf-8 3.8237ms |url: https://localhost/_framework/aspnetcore-browser-refresh.js|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 15:03:13.0870|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/index.html - - - 200 - text/html;charset=utf-8 253.4219ms |url: https://localhost/swagger/index.html|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 15:03:13.0995|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 12.4395ms |url: https://localhost/_vs/browserLink|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 15:03:13.1699|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 15:03:13.2401|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7127/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 70.1524ms |url: https://localhost/swagger/v1/swagger.json|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
2024-08-30 15:03:20.8787|1|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 |url: https://localhost/api/v1/etag|action: |Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestStarting
2024-08-30 15:03:20.8787|4|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful. |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Cors.CORSLoggerExtensions.PolicySuccess
2024-08-30 15:03:20.9021|0|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutingEndpoint
2024-08-30 15:03:20.9193|3|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateEtag", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEtag(VegaCityApp.API.Payload.Request.EtagRequest) on controller VegaCityApp.API.Controllers.Admin.AdminController (VegaCityApp.API). |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutingAction
2024-08-30 15:03:21.6663|10403|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.10 initialized 'VegaCityAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: None |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`5.Log
2024-08-30 15:03:22.1070|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (42ms) [Parameters=[@__req_UserId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Birthday], [u].[CCCD], [u].[crDate], [u].[Email], [u].[FullName], [u].[Gender], [u].[ImageUrl], [u].[MarketZoneId], [u].[Password], [u].[PhoneNumber], [u].[pinCode], [u].[RoleId], [u].[StoreId], [u].[upsDate]
FROM [User] AS [u]
WHERE [u].[Id] = @__req_UserId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`6.Log
2024-08-30 15:03:22.1398|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__req_EtagTypeId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[ImageUrl], [e].[MarketZoneId], [e].[Name]
FROM [ETagType] AS [e]
WHERE [e].[Id] = @__req_EtagTypeId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`6.Log
2024-08-30 15:03:22.1456|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__etagType_MarketZoneId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Address], [m].[crDate], [m].[Deflag], [m].[Description], [m].[Email], [m].[ImageUrl], [m].[Location], [m].[Name], [m].[PhoneNumber], [m].[ShortName], [m].[upsDate]
FROM [MarketZone] AS [m]
WHERE [m].[Id] = @__etagType_MarketZoneId_0 |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`6.Log
2024-08-30 15:03:22.3443|20101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = Date), @p3='?' (Size = 12) (DbType = AnsiStringFixedLength), @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (Size = 50) (DbType = AnsiString), @p7='?' (DbType = Guid), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 8000) (DbType = AnsiString), @p11='?' (DbType = Guid), @p12='?' (Size = 10) (DbType = AnsiStringFixedLength), @p13='?' (Size = 8000) (DbType = AnsiString), @p14='?' (DbType = DateTime), @p15='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ETag] ([Id], [Balance], [Birthday], [CCCD], [crDate], [Deflag], [EtagCode], [ETagTypeId], [FullName], [Gender], [ImageUrl], [MarketZoneId], [PhoneNumber], [QRCode], [upsDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15); |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`6.Log
2024-08-30 15:03:22.3620|1|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'VegaCityApp.API.Payload.Response.CreateEtagResponse'. |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ObjectResultExecuting
2024-08-30 15:03:22.3744|2|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API) in 1451.6733ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Mvc.MvcCoreLoggerExtensions.ExecutedAction
2024-08-30 15:03:22.3744|1|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'VegaCityApp.API.Controllers.Admin.AdminController.CreateEtag (VegaCityApp.API)' |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Routing.EndpointMiddleware+Log.ExecutedEndpoint
2024-08-30 15:03:22.3744|2|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7127/api/v1/etag application/json 291 - 200 - application/json;+charset=utf-8 1499.1313ms |url: https://localhost/api/v1/etag|action: CreateEtag|Microsoft.AspNetCore.Hosting.HostingApplicationDiagnostics.LogRequestFinished
